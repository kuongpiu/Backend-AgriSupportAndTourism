(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88bf6f94"],{"088b":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticStyle:{"padding-bottom":"100px"}},[t.hasFarm?i("div",[i("div",{staticStyle:{clear:"both"}},[i("el-tabs",{staticClass:"el-tabs",attrs:{type:"border-card"},model:{value:t.activeFarm,callback:function(e){t.activeFarm=e},expression:"activeFarm"}},t._l(t.farms,(function(e,r){return i("el-tab-pane",{key:e.id,attrs:{label:"Vườn thứ "+(r+1),name:r.toString()}},[i("div",[i("h2",{staticStyle:{"text-align":"left","padding-bottom":"10px"}},[t._v(t._s(t.currentFarm.name))]),i("farm-description",{attrs:{farm:t.currentFarm}}),i("div",{staticStyle:{"margin-top":"28px",float:"right"}},[i("el-button-group",[i("el-button",{attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-edit"},on:{click:t.handleEdit}},[t._v("Sửa")]),i("el-button",{attrs:{type:"danger",plain:"",size:"small",icon:"el-icon-delete"},on:{click:t.alertDelete}},[t._v("Xóa")])],1)],1),i("div",{staticClass:"detail-info"},[i("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{attrs:{name:"structure-tab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-setting"}),t._v(" Cấu trúc")]),i("div",{staticClass:"chart-container"},[i("el-col",{attrs:{span:12}},[i("el-card",[i("h3",{staticStyle:{"text-align":"left","padding-bottom":"10px"}},[i("i",{staticClass:"icon-before el-icon-setting"}),t._v(" Các loại cây ")]),i("pie-chart",{key:t.pieChartKey,staticClass:"pie-chart",attrs:{data:t.farmStatistic}})],1)],1)],1)]),i("el-tab-pane",{attrs:{name:"activity-tab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-news"}),t._v(" Hoạt động")]),i("div",{staticClass:"activity-container"},[i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:15}},[i("drag-kanban",{key:t.dragActivityKey,attrs:{farm:t.currentFarm},on:{ReRenderActivity:t.handleReRenderEvent}})],1),i("el-col",{attrs:{span:9}},[i("activity",{key:t.activityHistoryListKey,attrs:{farm:t.currentFarm}})],1)],1)],1)]),i("el-tab-pane",{attrs:{name:"product-tab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-box"}),t._v(" Sản phẩm")]),i("farm-product",{key:t.currentFarm.id,attrs:{"farm-id":t.currentFarm.id}})],1),i("el-tab-pane",{attrs:{name:"orders-tab"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-box"}),t._v(" Đơn hàng "),i("el-badge",{staticClass:"item",attrs:{type:"primary","is-dot":t.hasNewOrder}})],1),i("orders",{key:t.currentFarm.id,attrs:{"farm-id":t.currentFarm.id}})],1)],1)],1)],1)])})),1)],1),t.formsHaveData?i("el-dialog",{attrs:{title:"QUẢN LÝ THÔNG TIN",visible:t.dialogVisible,fullscreen:!1,width:"80%",center:!0,top:"2vh","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:12}},[i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingInfoFarm,expression:"loadingInfoFarm"}]},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"line-height":"30px"}},[i("i",{staticClass:"el-icon-info scale-icon",staticStyle:{color:"#c7c738"}}),t._v(" Thông tin vườn ")]),t.farmInfoFormHasChanged?i("div",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{color:"#0e7450"},attrs:{loading:t.buttonResetLoading,size:"small",type:"text",icon:"el-icon-refresh-left"},on:{click:t.handleResetFarmInfoForm}},[t._v(" Khôi phục ")]),i("el-button",{attrs:{loading:t.buttonSaveLoading,size:"small",type:"text",icon:"el-icon-check"},on:{click:t.handleSaveFarmInfoForm}},[t._v("Lưu ")])],1):t._e()]),i("el-form",{ref:"farmInfoForm",staticStyle:{padding:"0 10px"},attrs:{"label-position":"left","label-width":"120px",model:t.farmInfoForm,rules:t.farmInfoFormRules}},[i("el-form-item",{attrs:{label:"Tên vườn",prop:"name.content"}},[t.farmInfoForm.name.inputVisible?i("el-input",{ref:"farmName",on:{blur:function(e){t.farmInfoForm.name.inputVisible=!1}},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.farmInfoForm.name.inputVisible=!1}},model:{value:t.farmInfoForm.name.content,callback:function(e){t.$set(t.farmInfoForm.name,"content",e)},expression:"farmInfoForm.name.content"}}):i("div",[i("span",{staticStyle:{display:"inline-block","line-height":"25px"}},[t._v(" "+t._s(t.farmInfoForm.name.content)+" ")]),i("span",[i("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-edit",round:"",plain:""},on:{click:function(e){return t.showInput(t.farmInfoForm.name,"farmName")}}})],1)])],1),i("el-form-item",{attrs:{prop:"province",label:"Cấp tỉnh"}},[t.farmInfoForm.province.inputVisible?i("el-autocomplete",{ref:"farmProvince",staticClass:"el-autocomplete",attrs:{placeholder:"Cấp tỉnh","value-key":"name","fetch-suggestions":t.fetchProvinceSuggestions},on:{select:t.handleSelectProvince},model:{value:t.farmInfoForm.province.name,callback:function(e){t.$set(t.farmInfoForm.province,"name",e)},expression:"farmInfoForm.province.name"}}):i("div",[i("span",{staticStyle:{display:"inline-block","line-height":"25px"}},[t._v(" "+t._s(t.farmInfoForm.province.name)+" ")]),i("span",[i("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-edit",round:"",plain:""},on:{click:function(e){return t.showInput(t.farmInfoForm.province,"farmProvince")}}})],1)])],1),i("el-form-item",{attrs:{prop:"district",label:"Cấp huyện"}},[t.farmInfoForm.district.inputVisible?i("el-autocomplete",{ref:"farmDistrict",staticClass:"el-autocomplete",attrs:{"value-key":"name",placeholder:"Cấp huyện","fetch-suggestions":t.fetchDistrictSuggestions},on:{focus:t.focusDistrict,select:t.handleSelectDistrict},model:{value:t.farmInfoForm.district.name,callback:function(e){t.$set(t.farmInfoForm.district,"name",e)},expression:"farmInfoForm.district.name"}}):i("div",[i("span",{staticStyle:{display:"inline-block","line-height":"25px"}},[t._v(" "+t._s(t.farmInfoForm.district.name)+" ")]),i("span",[i("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-edit",round:"",plain:""},on:{click:function(e){return t.showInput(t.farmInfoForm.district,"farmDistrict")}}})],1)])],1),i("el-form-item",{attrs:{prop:"ward",label:"Cấp xã"}},[t.farmInfoForm.ward.inputVisible?i("el-autocomplete",{ref:"farmWard",staticClass:"el-autocomplete",attrs:{"value-key":"name",placeholder:"Cấp xã","fetch-suggestions":t.fetchWardSuggestions},on:{select:t.handleSelectWard,focus:t.focusWard},model:{value:t.farmInfoForm.ward.name,callback:function(e){t.$set(t.farmInfoForm.ward,"name",e)},expression:"farmInfoForm.ward.name"}}):i("div",[i("span",{staticStyle:{display:"inline-block","line-height":"25px"}},[t._v(" "+t._s(t.farmInfoForm.ward.name)+" ")]),i("span",[i("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-edit",round:"",plain:""},on:{click:function(e){return t.showInput(t.farmInfoForm.ward,"farmWard")}}})],1)])],1),i("el-form-item",{attrs:{label:"Cụ thể",prop:"detailAddress.content"}},[t.farmInfoForm.detailAddress.inputVisible?i("el-input",{ref:"farmDetailAddress",on:{blur:function(e){t.farmInfoForm.detailAddress.inputVisible=!1}},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.farmInfoForm.detailAddress.inputVisible=!1}},model:{value:t.farmInfoForm.detailAddress.content,callback:function(e){t.$set(t.farmInfoForm.detailAddress,"content",e)},expression:"farmInfoForm.detailAddress.content"}}):i("div",[i("span",{staticStyle:{display:"inline-block","line-height":"25px"}},[t._v(" "+t._s(t.farmInfoForm.detailAddress.content)+" ")]),i("span",[i("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-edit",round:"",plain:""},on:{click:function(e){return t.showInput(t.farmInfoForm.detailAddress,"farmDetailAddress")}}})],1)])],1),t._l(t.farmInfoForm.descriptions,(function(e,r){return i("el-form-item",{key:r,attrs:{prop:e.label}},[e.inputLabelVisible?i("el-input",{staticClass:"el-label-input",attrs:{placeholder:"Tên mục"},on:{blur:function(i){return t.checkRemoveDescription(e,r)}},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:(i.preventDefault(),t.checkRemoveDescription(e,r))}},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"desc.label"}}):i("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.label))]),e.inputVisible?i("el-input",{ref:"desc"+r,refInFor:!0,attrs:{placeholder:"Nội dung"},on:{blur:function(t){e.inputVisible=!1}},nativeOn:{keyup:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;i.preventDefault(),e.inputVisible=!1}},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"desc.content"}}):i("span",[t._v(" "+t._s(e.content)+" "),i("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-edit",round:"",plain:""},on:{click:function(i){return t.showInput(e,"desc"+r,!0)}}})],1)],1)})),i("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-plus"},on:{click:t.handleInsertDescription}},[t._v("Bổ sung ")])],2)],1)],1),i("el-col",{attrs:{span:12}},[i("el-card",{key:t.farmStructureKey},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"line-height":"30px"}},[i("i",{staticClass:"el-icon-s-tools scale-icon",staticStyle:{color:"#52a7ff"}}),t._v(" Cấu trúc vườn ")]),t.farmStructureHasChanged?i("div",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{color:"#0e7450"},attrs:{size:"small",type:"text",icon:"el-icon-refresh-left"},on:{click:t.handleResetFarmStructureForm}},[t._v(" Khôi phục ")]),i("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-check"},on:{click:t.handleSaveFarmStructureForm}},[t._v(" Lưu ")])],1):t._e()]),i("div",[i("el-form",{attrs:{model:t.farmStructureForm,"label-position":"left"}},[i("h4",{staticStyle:{"margin-bottom":"15px"}},[t._v("Loại cây")]),i("el-form-item",{attrs:{prop:"types"}},[t._l(t.farmStructureForm.types,(function(e){return i("el-tag",{key:e,staticClass:"el-tag",attrs:{closable:"","disable-transitions":!0},on:{close:function(i){return t.handleRemoveTree(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputTreeVisible?i("el-autocomplete",{ref:"saveTreeTagInput",staticClass:"input-new-tag",attrs:{size:"small","select-when-unmatched":!0,"fetch-suggestions":t.queryTreeSearch,clearable:"",placeholder:"Tên cây"},on:{select:t.handleInputTreeConfirm,clear:function(e){t.inputTreeVisible=!1}},model:{value:t.inputTree,callback:function(e){t.inputTree=e},expression:"inputTree"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.showInputTree}},[t._v(" Thêm ")])],2),t.farmStructureForm.numbers.length>0?i("h4",{staticStyle:{"margin-bottom":"15px","padding-top":"10px","border-top":"1px solid deepskyblue"}},[t._v("Số lượng")]):t._e(),t._l(t.farmStructureForm.numbers,(function(e){return i("el-form-item",{key:e.name,staticStyle:{"margin-bottom":"0","margin-left":"10px"},attrs:{"label-width":"220px",prop:e.name,label:e.name}},[i("el-input-number",{attrs:{size:"mini",min:0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"tree.value"}})],1)}))],2)],1)])],1)],1)],1):t._e()],1):i("div",{staticStyle:{clear:"both"}},[i("el-empty",{attrs:{description:"Bạn chưa đăng ký vườn nào cả"}},[i("router-link",{attrs:{to:"/create-farm"}},[i("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"success",icon:"el-icon-folder-add"}},[t._v(" Thêm vườn ")])],1)],1)],1)])},a=[],n=i("b85c"),s=i("5530"),o=i("2909"),c=i("1da1"),l=(i("96cf"),i("b0c0"),i("b64b"),i("d3b7"),i("d81d"),i("4de4"),i("a434"),i("498a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:{height:t.height,width:t.width}})}),u=[],d=i("313e"),m=i.n(d);i("53ca"),i("ac1f"),i("00b4"),i("5319"),i("4d63"),i("2c3e"),i("25f0"),i("4d90"),i("1276"),i("159b");function h(t,e,i){var r,a,n,s,o,c=function c(){var l=+new Date-s;l<e&&l>0?r=setTimeout(c,e-l):(r=null,i||(o=t.apply(n,a),r||(n=a=null)))};return function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];n=this,s=+new Date;var d=i&&!r;return r||(r=setTimeout(c,e)),d&&(o=t.apply(n,l),n=l=null),o}}var f={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=h((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};i("817d");var p={mixins:[f],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},data:{type:Object,default:function(){return{types:["Mít","Dứa","Thanh Long","Gold","Hồng xiêm"],numbers:[{value:320,name:"Mít"},{value:240,name:"Dứa"},{value:149,name:"Thanh Long"},{value:100,name:"Hồng xiêm"}]}}}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=m.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:this.data.types},series:[{name:"Số lượng cây",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:this.data.numbers,animationEasing:"cubicInOut",animationDuration:2600}]})}}},g=p,v=i("2877"),b=Object(v["a"])(g,l,u,!1,null,null,null),y=b.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-descriptions",{attrs:{column:2,size:"medium"}},[i("el-descriptions-item",{key:"address",attrs:{label:"Địa chỉ"}},[t._v(t._s(t.farm.ward.name)+", "+t._s(t.farm.district.name)+", "+t._s(t.farm.province.name)+" ")]),i("el-descriptions-item",{key:"detailAddress",attrs:{label:"Cụ thể"}},[t._v(t._s(t.farm.detailAddress)+" ")]),t._l(Object.keys(t.farm.descriptions),(function(e){return i("el-descriptions-item",{key:e,attrs:{label:e}},[t._v(" "+t._s(t.farm.descriptions[e])+" ")])}))],2)},S=[],C={name:"FarmDescription",props:{farm:{type:Object,required:!0}}},k=C,F=Object(v["a"])(k,w,S,!1,null,null,null),I=F.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("div",{staticStyle:{"padding-bottom":"10px",display:"flex","justify-content":"space-between"}},[i("h3",[i("i",{staticClass:"icon-before el-icon-edit-outline"}),t._v(" Quản lý hoạt động ")]),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-date-picker",{ref:"datePicker",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy","default-value":new Date,placeholder:"Hôm nay","picker-options":t.datePickerOptions},on:{change:t.searchFarmCaresByDate},model:{value:t.inputDate,callback:function(e){t.inputDate=e},expression:"inputDate"}})],1)]),i("div",{staticClass:"components-container"},[i("el-dialog",{attrs:{title:t.farmCare.activity.name,visible:t.dialogVisible,fullscreen:!1,width:"80%",center:!0,top:"2vh","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.farmCare.activity.description.length>0?i("div",{staticStyle:{padding:"0 10px","margin-top":"-20px","padding-bottom":"8px","border-bottom":"1px solid #bfcbd9"}},[i("i",{staticClass:"el-icon-info",staticStyle:{color:"#4dd9d5"}}),i("span",{staticStyle:{"line-height":"1.3rem"}},[t._v(" "+t._s(t.farmCare.activity.description)+" ")])]):t._e(),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"0 10px 50px 10px","margin-top":"20px"},attrs:{model:t.farmCare}},[i("el-form-item",{attrs:{prop:"inputTag",label:"Người tham gia"}},[i("div",[i("br")]),t._l(t.farmCare.visitors,(function(e,r){return i("el-tag",{key:e+r,staticClass:"el-tag",attrs:{closable:"","disable-transitions":!0},on:{close:function(i){return t.handleRemoveVisitor(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.handleInputConfirm(e))}},model:{value:t.inputTag,callback:function(e){t.inputTag=e},expression:"inputTag"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.showInputTag}},[t._v("Thêm ")])],2),i("h4",{staticStyle:{"margin-bottom":"15px"}},[t._v("Loại cây")]),i("el-form-item",{attrs:{prop:"trees"}},[t._l(t.farmCare.trees,(function(e){return i("el-row",{key:"container"+e.treeId,staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:6}},[i("el-tag",{staticClass:"el-tag",attrs:{closable:"","disable-transitions":!0},on:{close:function(i){return t.handleRemoveTree(e)}}},[t._v(" "+t._s(e.treeName)+" ")])],1),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"div-contain-input"},[i("el-input",{attrs:{clearable:"",autosize:{maxRows:3,minRows:1},type:"textarea",placeholder:"Mô tả"},model:{value:e.status,callback:function(i){t.$set(e,"status",i)},expression:"tree.status"}})],1)])],1)})),t.inputTreeVisible?i("el-autocomplete",{ref:"saveActivityTreeTagInput",staticClass:"input-new-tag-large",attrs:{"value-key":"treeName",size:"small","select-when-unmatched":!0,"fetch-suggestions":t.queryTreeSearch,clearable:"",placeholder:"Tên cây"},on:{select:t.handleInputTreeConfirm,clear:function(e){t.inputTreeVisible=!1}},model:{value:t.inputTree,callback:function(e){t.inputTree=e},expression:"inputTree"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.showInputTree}},[t._v(" Thêm ")])],2),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{prop:"careDate",label:"Ngày tham gia (Ngày/Tháng/Năm)"}},[i("br"),i("el-date-picker",{ref:"datePicker",staticStyle:{"margin-left":"10px"},attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"ngày","picker-options":t.datePickerOptions},model:{value:t.farmCare.careDate,callback:function(e){t.$set(t.farmCare,"careDate",e)},expression:"farmCare.careDate"}})],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"careTime",label:"Giờ tham gia (Giờ:Phút:Giây)"}},[i("br"),i("el-time-picker",{staticStyle:{"margin-left":"10px"},attrs:{format:"HH:mm:ss","value-format":"HH:mm:ss",placeholder:"giờ"},model:{value:t.farmCare.careTime,callback:function(e){t.$set(t.farmCare,"careTime",e)},expression:"farmCare.careTime"}})],1)],1)],1),i("el-form-item",{attrs:{prop:"description",label:"Ghi chú"}},[i("el-input",{staticStyle:{"margin-left":"10px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:t.farmCare.description,callback:function(e){t.$set(t.farmCare,"description",e)},expression:"farmCare.description"}})],1),i("div",{staticStyle:{float:"right"}},[t.isUpdateOperation?i("div",[i("el-button",{attrs:{loading:t.buttonDeleteActivityLoading,type:"danger",plain:""},on:{click:t.handleDeleteFarmCare}},[t._v(" Xóa ")]),i("el-button",{attrs:{type:"success",plain:"",loading:t.buttonSaveActivityLoading},on:{click:t.handleUpdateActivity}},[t._v("Cập nhật ")])],1):i("div",[i("el-button",{attrs:{type:"success",plain:"",loading:t.buttonSaveActivityLoading},on:{click:t.handleSaveActivity}},[t._v("Tạo ")])],1)])],1)],1),i("div",{staticClass:"board"},[i("div",[i("Kanban",{key:"todoActivities",staticClass:"kanban todo",attrs:{list:t.todoActivities,group:"group","header-text":"Hoạt động"},on:{showDetailActivity:t.handleShowCreateFarmCareDialog,change:t.handleTodoActivitiesChangeEvent}}),i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{plain:"",type:"primary",icon:"el-icon-plus"}},[t._v(" Thêm hoạt động ")])],1),i("Kanban",{key:"finishedActivities",staticClass:"kanban done",attrs:{list:t.finishedActivities,group:t.group,"header-text":"Hoàn thành"},on:{showDetailActivity:t.handleShowDetailActivity,change:t.handleFinishedActivitiesChange}})],1)],1)])},_=[],T=(i("a4d3"),i("e01a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"board-column"},[i("div",{staticClass:"board-column-header"},[t._v(" "+t._s(t.headerText)+" ")]),i("draggable",t._b({staticClass:"board-column-content",attrs:{list:t.list,"set-data":t.setData},on:{change:t.handleChangeEvent}},"draggable",t.$attrs,!1),t._l(t.list,(function(e,r){return i("el-card",{key:r,staticClass:"board-item",attrs:{shadow:"hover","body-style":"padding: 0"}},[i("el-button",{staticClass:"content",attrs:{plain:""},on:{click:function(i){return t.handleClickActivity(e)}}},[t._v(t._s(e.name))])],1)})),1)],1)}),O=[],D=i("b76a"),$=i.n(D),A={name:"DragKanbanDemo",components:{draggable:$.a},props:{headerText:{type:String,default:"Header"},options:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},methods:{setData:function(t){t.setData("Text","")},handleChangeEvent:function(t){this.$emit("change",t)},handleClickActivity:function(t){this.$emit("showDetailActivity",t)}}},z=A,j=(i("0f71"),Object(v["a"])(z,T,O,!1,null,"4b486dfc",null)),R=j.exports,V=i("b775");function L(){return Object(V["a"])({url:"/activity/all",method:"get"})}var E=i("172d"),P={name:"DragKanbanDemo",components:{Kanban:R},props:{farm:{type:Object,required:!0}},data:function(){return{group:"mission",todoActivities:[],finishedActivities:[],dialogVisible:!1,activity:{name:"",participants:[],description:""},farmCare:{activity:{id:"",name:"",description:""},trees:[],visitors:[],careDate:"",careTime:"",description:""},treeList:[],inputVisible:!1,inputTag:"",inputTreeVisible:!1,inputTree:"",buttonDeleteActivityLoading:!1,buttonSaveActivityLoading:!1,isUpdateOperation:!1,inputDate:"",dialogLoading:!1,datePickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"Hôm nay",onClick:function(t){t.$emit("pick",new Date)}},{text:"Hôm qua",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"Tuần trước",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},mounted:function(){this.fetchActivity()},created:function(){this.searchFarmCaresByDate(),console.log("created, farm id: ",this.farm.id)},methods:{fetchActivity:function(){var t=this;L().then((function(e){t.todoActivities=e})).catch((function(t){console.log(t)}))},handleTodoActivitiesChangeEvent:function(t){t.added?console.log("todo activities: added"):t.removed?console.log("todo activities: removed"):console.log("todo activities: moved"),console.log(t)},handleFinishedActivitiesChange:function(t){t.added?console.log("finished activities: added"):t.removed?console.log("finished activities: removed"):console.log("finished activities: moved"),console.log(t)},handleShowCreateFarmCareDialog:function(t){this.farmCare={activity:t,trees:[],visitors:[],description:""},this.treeList=this.farm.trees,this.dialogVisible=!0,this.isUpdateOperation=!1,this.inputTreeVisible=!1},bindDataToFarmCareHistory:function(t,e){var i=e.farmCareHistoryDTO.treeCares.map((function(t){return{treeId:t.tree.id,treeName:t.tree.name,id:t.id,status:t.status}})),r=e.visitors.map((function(t){return t.username}));this.farmCare={activity:t,trees:i,careTime:e.farmCareHistoryDTO.careTime,careDate:e.farmCareHistoryDTO.careDate,visitors:r,description:e.farmCareHistoryDTO.description}},handleShowDetailActivity:function(t){var e=this,i=t.farmCareId;this.dialogVisible=!0,this.isUpdateOperation=!0,this.treeList=this.farm.trees,this.inputTreeVisible=!1,this.dialogLoading=!0,Object(E["c"])(i).then((function(i){console.log(i),e.bindDataToFarmCareHistory(t,i)})).catch((function(t){e.dialogVisible=!1,e.isUpdateOperation=!1,e.$message.error("Lỗi không tải được dữ liệu"),console.log(t)})).finally((function(){e.dialogLoading=!1}))},handleRemoveVisitor:function(t){this.farmCare.visitors.splice(this.farmCare.visitors.indexOf(t),1)},handleInputConfirm:function(){var t=this.inputTag;t&&this.farmCare.visitors.push(t),this.inputTag="",this.inputVisible=!1},showInputTag:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleDeleteFarmCare:function(){var t=this;this.$confirm("Hoạt động này sẽ bị xóa vĩnh viễn, bạn có chắc không ?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}).then((function(){console.log("handle delete farm care, ",t.farmCare.activity.farmCareId),Object(E["a"])(t.farmCare.activity.farmCareId).then((function(){t.$message.success("Xóa thành công"),t.dialogVisible=!1,t.searchFarmCaresByDate(),t.emitReRenderActivity()})).catch((function(e){t.$message.error("Lỗi khi xóa"),console.log(e)}))})).catch((function(){console.log("cancel delete !")}))},handleUpdateActivity:function(){var t=this,e=this.farmCare.trees.map((function(t){return{id:t.id,tree:{id:t.treeId},status:t.status}})),i=this.farmCare.visitors.map((function(t){return{username:t}})),r={farmCareHistoryDTO:{id:this.farmCare.activity.farmCareId,farmId:this.farm.id,activity:{id:this.farmCare.activity.id},careDate:this.farmCare.careDate,careTime:this.farmCare.careTime,treeCares:e,description:this.farmCare.description},visitors:i};console.log("send update farm care query, ",r),this.buttonSaveActivityLoading=!0,Object(E["f"])(r).then((function(e){t.$message.success("Cập nhật thành công"),console.log("update successfully, ",e),t.dialogVisible=!1,t.emitReRenderActivity()})).catch((function(e){t.$message.error("Lỗi khi cập nhật"),console.log(e)})).finally((function(){t.buttonSaveActivityLoading=!1}))},handleSaveActivity:function(){var t=this,e=this.farmCare.activity;console.log(this.farmCare.trees);var i=this.farmCare.trees.map((function(t){return{tree:{id:t.treeId},status:t.status}})),r=this.farmCare.visitors.map((function(t){return{username:t}})),a={farmCareHistoryDTO:{farmId:this.farm.id,activity:{id:this.farmCare.activity.id},careDate:this.farmCare.careDate,careTime:this.farmCare.careTime,treeCares:i,description:this.farmCare.description},visitors:r};console.log("save, ",a),this.buttonSaveActivityLoading=!0,Object(E["d"])(a).then((function(i){t.$message.success("Tạo hoạt động thành công"),console.log("successfully, ",i),t.farmCare.trees=[],t.farmCare.visitors=[],t.farmCare.description="",t.finishedActivities.splice(0,0,Object(s["a"])({farmCareId:i.farmCareHistoryDTO.id},e)),t.dialogVisible=!1,t.emitReRenderActivity()})).catch((function(e){t.$message.error("Lỗi khi tạo"),console.log(e)})).finally((function(){t.buttonSaveActivityLoading=!1}))},handleRemoveTree:function(t){this.farmCare.trees.splice(this.farmCare.trees.indexOf(t),1)},queryTreeSearch:function(t,e){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log("tree list",i.treeList),a=i.farmCare.trees.map((function(t){return t.treeId})),n=i.treeList.filter((function(t){return a.indexOf(t.treeId)<0})),s=t?n.filter(i.createFilter(t)):n,e(s);case 5:case"end":return r.stop()}}),r)})))()},createFilter:function(t){return function(e){return e.treeName.toLowerCase().indexOf(t.toLowerCase())>0}},handleInputTreeConfirm:function(t){console.log("handle input tree confirm, ",t),this.farmCare.trees.push(Object(s["a"])({status:""},t)),this.inputTree="",this.inputTreeVisible=!1},showInputTree:function(){var t=this;this.inputTreeVisible=!0,this.$nextTick((function(e){t.$refs["saveActivityTreeTagInput"].$refs.input.focus()}))},searchFarmCaresByDate:function(){var t=this;null==this.inputDate&&(this.inputDate=""),Object(E["e"])(this.farm.id,this.inputDate).then((function(e){t.farmCareList=e,t.finishedActivities=e.map((function(t){return Object(s["a"])({farmCareId:t.farmCareHistoryDTO.id},t.farmCareHistoryDTO.activity)}))})).catch((function(e){t.$message.error("Error !"),console.log(e)}))},emitReRenderActivity:function(){this.$emit("ReRenderActivity")}}},H=P,N=(i("58b2"),Object(v["a"])(H,x,_,!1,null,null,null)),M=N.exports,U=i("d415"),q=i("2f94"),B=i("8f13"),K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("el-table",{staticStyle:{width:"100%","padding-bottom":"50px","font-size":"medium","font-weight":"normal"},attrs:{data:t.orders,size:"large","row-class-name":t.tableRowClassName},on:{"row-click":t.handleRowClick}},[i("el-table-column",{attrs:{prop:"orderDate",width:"120",label:"Ngày"}}),i("el-table-column",{attrs:{label:"Người mua",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[i("div",{staticClass:"user-info"},[i("el-avatar",{attrs:{size:"medium",src:r.address.user.avatar,fit:"cover"}}),i("div",{staticClass:"name"},[i("span",[t._v(t._s(r.address.user.username))])])],1)]}}])}),i("el-table-column",{attrs:{label:"Tổng",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{color:"red","font-weight":"500","font-size":"medium"}},[t._v(t._s(t.calculateOrderAmount(e.row)))])]}}])}),i("el-table-column",{attrs:{label:"Thanh toán"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{"word-break":"break-word"}},[t._v(t._s(t.paymentMethod(e.row)))])]}}])}),i("el-table-column",{attrs:{width:"180",label:"Trạng thái"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.edit?[i("el-select",{attrs:{placeholder:"Trạng thái"},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"row.status"}},t._l(t.statusOptions,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)]:i("span",[t._v(t._s(r.status))])]}}])}),i("el-table-column",{attrs:{align:"center",label:"Hành động",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.edit?i("div",[i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-check"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.confirmEdit(r)}}},[t._v(" Lưu ")]),i("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.cancelEdit(r)}}},[t._v(" Hủy ")])],1):i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),r.edit=!r.edit}}},[t._v(" Sửa ")])]}}])})],1)],1),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,center:!0,"close-on-click-modal":!1,top:"2vh",width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:13}},[i("el-card",[i("span",{staticStyle:{"font-weight":"600","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t._v("Thông tin sản phẩm")]),i("div",{staticStyle:{"margin-top":"-20px"}},[t._l(t.currentOrder.orderedProducts,(function(t,e){return i("order-detail",{key:e,staticClass:"order-detail",attrs:{"order-detail":t}})})),i("h5",{staticStyle:{color:"#5a5e66","font-weight":"500","margin-top":"-35px",display:"inline-block",float:"right","border-left":"1px solid #99a9bf",padding:"15px 10px"}},[t._v(" Tổng tiền: "),i("span",{staticStyle:{color:"red","font-size":"medium"}},[t._v(t._s(t.convertPriceToVND(t.orderAmount)))])])],2)])],1),i("el-col",{attrs:{span:11}},[i("el-card",{staticStyle:{"margin-bottom":"10px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-weight":"600","text-align":"center"}},[t._v("Thông tin thanh toán")]),i("span",{staticStyle:{float:"right","font-weight":"500",color:"#78e590","font-size":"medium"}},[t._v(t._s(t.paymentStatus))])]),i("div",{staticClass:"payment-container"},[i("span",{},[t._v(t._s(t.currentOrderPaymentMethod))])])]),null!=t.currentOrder.address?i("el-card",[i("span",{staticStyle:{"font-weight":"600","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t._v("Địa chỉ giao hàng")]),i("el-row",{staticClass:"receiver-info-container"},[i("el-col",{attrs:{span:7}},[i("span",{staticClass:"label-info"},[t._v("Họ tên")])]),i("el-col",{attrs:{span:17}},[i("span",{staticClass:"content-info"},[t._v(t._s(t.currentOrder.address.receiver))])])],1),i("el-row",{staticClass:"receiver-info-container"},[i("el-col",{attrs:{span:7}},[i("span",{staticClass:"label-info"},[t._v("Số điện thoại")])]),i("el-col",{attrs:{span:17}},[i("span",{staticClass:"content-info"},[t._v(t._s(t.currentOrder.address.phoneNumber))])])],1),i("el-row",{staticClass:"receiver-info-container"},[i("el-col",{attrs:{span:7}},[i("span",{staticClass:"label-info"},[t._v("Địa chỉ")])]),i("el-col",{attrs:{span:17}},[i("span",{staticClass:"content-info"},[t._v(t._s(t.formatAddress(t.currentOrder.address)))])])],1)],1):t._e()],1)],1)],1)],1)},W=[],X=i("f8b7"),G=i("2861"),Z=i("5653"),Y=i("92a5"),Q={name:"Orders",components:{OrderDetail:Z["a"],AddressItem:Y["a"]},props:["farmId"],data:function(){return{orders:[],dialogVisible:!1,dialogTitle:"",currentOrder:{orderedProducts:[]},convertPriceToVND:G["a"],statusOptions:["Tiếp nhận","Xử lý","Đã gửi","Hủy"]}},computed:{orderAmount:function(){var t,e=0,i=Object(n["a"])(this.currentOrder.orderedProducts);try{for(i.s();!(t=i.n()).done;){var r=t.value;e+=r.quantity*r.price}}catch(a){i.e(a)}finally{i.f()}return e},paymentStatus:function(){return"cod"===this.currentOrder.paymentMethod?"Chưa thanh toán":"Đã thanh toán"},currentOrderPaymentMethod:function(){return"cod"===this.currentOrder.paymentMethod?"Thanh toán khi nhận hàng":"Thanh toán trực tuyến qua VnPay"}},mounted:function(){var t=this;Object(X["b"])(this.farmId).then((function(e){t.orders=e.reverse().map((function(e){return t.$set(e,"edit",!1),e.originalStatus=e.status,e})),console.log("orders in farm: ",t.orders)})).catch((function(t){console.log(t)}))},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return"Tiếp nhận"===e.status?"success-row":"Đã gửi"===e.status?"sent-row":"Hủy"===e.status?"reject-row":""},getOrdersAmount:function(t){var e,i=0,r=Object(n["a"])(t.orderDetails);try{for(r.s();!(e=r.n()).done;){var a=e.value;i+=a.price*a.quantity}}catch(s){r.e(s)}finally{r.f()}return i},calculateOrderAmount:function(t){return"cod"===t.paymentMethod?Object(G["a"])(this.getOrdersAmount(t)):"vnpay"===t.paymentMethod&&null!=t.paymentId?Object(G["a"])(0):Object(G["a"])(this.getOrdersAmount(t))},paymentMethod:function(t){return"cod"===t.paymentMethod?"Thanh toán khi nhận hàng":"vnpay"===t.paymentMethod&&null!=t.paymentId?"Đã thanh toán":"Thanh toán khi nhận hàng"},formatAddress:function(t){var e=", ",i="";return t.detail.length>0&&(i+=t.detail+e),i+=t.ward.name+e,i+=t.district.name+e,i+=t.province.name,i},handleRowClick:function(t,e,i){var r=this;console.log("show order details in orderNumber: "+t.orderNumber),Object(X["c"])(t.orderNumber).then((function(t){r.currentOrder=t,console.log(r.currentOrder),r.dialogVisible=!0,r.dialogTitle="Trạng thái đơn hàng: "+r.currentOrder.status})).catch((function(t){console.log(t),r.dialogVisible=!1,r.$message.error("Lỗi khi xem chi tiết đơn hàng, vui lòng thử lại sau")}))},cancelEdit:function(t){t.status=t.originalStatus,t.edit=!1,this.$message({message:"Hủy bỏ cập nhật",type:"warning"})},confirmEdit:function(t){var e=this,i={orderNumber:t.orderNumber,status:t.status};Object(X["e"])(i).then((function(){e.$message({message:"Cập nhật trạng thái thành công",type:"success"}),t.originalStatus=t.status,t.edit=!1})).catch((function(t){e.$message({message:"Cập nhật trạng thái thất bại, vui lòng thử lại sau",type:"error"}),console.log(t)}))}}},J=Q,tt=(i("6966"),Object(v["a"])(J,K,W,!1,null,null,null)),et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[i("h3",{staticStyle:{"text-align":"left",display:"inline-block"}},[i("i",{staticClass:"icon-before el-icon-box"}),t._v(" Kho sản phẩm ")]),i("span",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.handleOpenDialogCreateProduct}},[t._v("Thêm sản phẩm")])],1)]),t.products.length>0?i("div",{staticClass:"product-container"},t._l(t.products,(function(e){return i("product-item",{key:e.id,attrs:{product:e},on:{showProductDetail:t.handleShowProductDetail}})})),1):i("div",{staticStyle:{clear:"both"}},[i("el-empty",{attrs:{description:"Chưa có sản phẩm nào"}})],1),i("el-dialog",{attrs:{title:t.dialogTitle,loading:t.dialogLoading,fullscreen:!1,"close-on-click-modal":!1,width:"80%",center:!0,top:"2vh",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeDialog}},[i("div",{staticStyle:{"padding-bottom":"50px"}},[i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:12}},[i("el-row",[i("span",{staticStyle:{display:"block","margin-bottom":"10px"}},[i("b",[t._v("Ảnh chính")])]),i("el-button",{staticStyle:{padding:"3px","margin-bottom":"15px"},on:{click:t.handleUploadMainImage}},[i("el-image",{staticStyle:{width:"450px",height:"450px"},attrs:{src:t.productForm.mainImage,fit:"cover"}})],1)],1),i("br"),i("el-row",[i("span",{staticStyle:{display:"inline-block","margin-bottom":"10px"}},[i("b",[t._v("Ảnh bổ sung")])]),i("el-upload",{ref:"imageUpload",staticClass:"upload",attrs:{action:"http://localhost:8080/api/doc/add","on-success":t.handleUploadSuccess,"on-change":t.handleOnChange,"on-remove":t.handleRemove,"auto-upload":!1,"file-list":t.fileList,multiple:"",name:"documents","list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus"})])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form",{ref:"productForm",attrs:{model:t.productForm,rules:t.productFormRule}},[i("el-form-item",{attrs:{prop:"name",label:"Tên sản phẩm"}},[i("el-input",{model:{value:t.productForm.name,callback:function(e){t.$set(t.productForm,"name",e)},expression:"productForm.name"}})],1),i("el-form-item",{attrs:{prop:"status",label:"Trạng thái"}},[i("br"),i("el-select",{staticStyle:{display:"inline-block"},attrs:{clearable:"",placeholder:"Trạng thái"},model:{value:t.productForm.status,callback:function(e){t.$set(t.productForm,"status",e)},expression:"productForm.status"}},t._l(t.statusOptions,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),i("el-form-item",{attrs:{prop:"price",label:"Giá bán"}},[i("el-input",{model:{value:t.productForm.price,callback:function(e){t.$set(t.productForm,"price",e)},expression:"productForm.price"}})],1),i("el-form-item",{attrs:{prop:"province",label:"Khu vực"}},[i("el-autocomplete",{ref:"inputProvince",staticStyle:{display:"block"},attrs:{clearable:"",placeholder:"Cấp tỉnh","value-key":"name","fetch-suggestions":t.fetchProvinceSuggestions},on:{select:t.handleSelectProvince},model:{value:t.productForm.province.name,callback:function(e){t.$set(t.productForm.province,"name",e)},expression:"productForm.province.name"}})],1),i("el-form-item",{attrs:{prop:"description",label:"Mô tả sản phẩm"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.productForm.description,callback:function(e){t.$set(t.productForm,"description",e)},expression:"productForm.description"}})],1)],1)],1)],1),i("div",{staticStyle:{float:"right"}},["update-product"===t.dialogAction?i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:t.alertDelete}},[t._v(" Xóa ")]):t._e(),i("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-check"},on:{click:t.handleSaveProduct}},[t._v("Lưu ")])],1)],1),i("image-cropper",{directives:[{name:"show",rawName:"v-show",value:t.imagecropperShow,expression:"imagecropperShow"}],key:t.imagecropperKey,attrs:{width:450,height:450,url:"http://localhost:8080/api/doc/add",field:"documents","lang-type":"vn"},on:{close:t.close,"crop-upload-success":t.cropSuccess}})],1)],1)},rt=[],at=(i("8ba4"),i("a9e3"),i("99af"),i("3605")),nt=i("896b"),st=i("c4c8"),ot=["Còn hàng","Hết hàng","Sắp có"],ct={name:"FarmProduct",components:{ProductItem:at["a"],ImageCropper:nt["a"]},props:["farmId"],data:function(){return{products:[],dialogVisible:!1,productForm:{name:"",description:"",status:"",price:"",province:{name:""},mainImage:"",imageUrls:[]},imagecropperShow:!1,imagecropperKey:0,fileList:[],dialogTitle:"",dialogLoading:!1,dialogAction:"",productFormRule:{name:[{required:!0,message:"Tên sản phẩm không hợp lệ",trigger:"blur"}],status:[{required:!0,message:"Trạng thái sản phẩm không hợp lệ",trigger:"blur"}],price:[{required:!0,validator:this.validatePrice,trigger:"blur"}],description:[]},statusOptions:ot}},mounted:function(){this.fetchProducts()},methods:{fetchProducts:function(){var t=this;Object(st["b"])(this.farmId).then((function(e){t.products=e})).catch((function(t){console.log(t)}))},validatePrice:function(t,e,i){Number.isInteger(1*e)?i():i(new Error("Giá không hợp lệ"))},handleShowProductDetail:function(t){var e=this;console.log("handle show product detail, productId",t),this.dialogVisible=!0,this.dialogAction="update-product",this.dialogTitle="Thông tin sản phẩm",this.dialogLoading=!0,Object(st["d"])(t).then((function(t){console.log("receive product detail",t),e.dialogLoading=!1,t.mainImage=t.imageUrls.shift(),e.loadProductInfoToForm(t)})).catch((function(t){console.log(t),e.$message.error("Sản phẩm không tồn tại trong hệ thống, vui lòng kiểm tra lại")}))},loadProductInfoToForm:function(t){null===t?this.productForm={name:"",description:"",status:"",price:"",province:{name:""},mainImage:"https://icon-library.com/images/add-photo-icon/add-photo-icon-29.jpg",imageUrls:[]}:(this.productForm.id=t.id,this.productForm.name=t.name,this.productForm.description=t.description,this.productForm.status=t.status,this.productForm.price=t.price,this.productForm.province=t.province,this.productForm.mainImage=t.mainImage,this.productForm.imageUrls=t.imageUrls,this.fileList=t.imageUrls.map((function(t){return{url:t}})))},handleResetProduct:function(){console.log("Reset product: ",this.productForm)},alertDelete:function(){var t=this;this.$confirm("Sản phẩm sẽ bị xóa vĩnh viễn, bạn có chắc không ?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}).then((function(){t.handleDelete()})).catch((function(){console.log("cancel delete !")}))},handleDelete:function(){var t=this,e=this.productForm.id;console.log("delete product, id= ",e),Object(st["a"])(e).then((function(){t.$message.success("Xóa sản phẩm thành công"),t.fetchProducts(),t.closeDialog()})).catch((function(e){console.log(e),t.$message.error("Lỗi khi xóa sản phẩm, vui lòng thử lại")}))},handleSaveProduct:function(){var t=this;this.$refs["productForm"].validate((function(e){if(!e)return t.$message.warning("Thông tin cung cấp chưa hợp lệ, vui lòng kiểm tra lại các thông tin"),!1;if(t.$refs.imageUpload.uploadFiles.length>0){var i=!1;console.log(t.fileList);var r,a=Object(n["a"])(t.fileList);try{for(a.s();!(r=a.n()).done;){var s=r.value;if("success"!==s.status){i=!0;break}}}catch(o){a.e(o)}finally{a.f()}i?t.$refs.imageUpload.submit():t.saveProduct()}else t.saveProduct()}))},handleUploadMainImage:function(){this.imagecropperShow=!0},close:function(){this.imagecropperShow=!1,console.log("close")},cropSuccess:function(t){this.productForm.mainImage=t[0].downloadUri},handleUploadSuccess:function(t,e,i){var r=[];console.log("fileList",i),console.log("response",t);var a,s=Object(n["a"])(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;if("success"!==o.status)return;r.push(o)}}catch(l){s.e(l)}finally{s.f()}var c=r.map((function(t){return void 0!==t.response?t.response[0]:t.url}));this.productForm.imageUrls=c.map((function(t){return void 0!==t["downloadUri"]?t["downloadUri"]:t})),this.saveProduct()},handleOnChange:function(t,e){console.log("on change",t,e),this.fileList=e},handleRemove:function(t,e){if(console.log("file",t),console.log("fileList",e),"success"===t.status&&void 0!==t.url&&null!==t.url){var i=this.productForm.imageUrls.indexOf(t.url);i<0||i>=this.productForm.imageUrls.length||(this.fileList=e,this.productForm.imageUrls.splice(i,1))}},saveProduct:function(){var t={name:this.productForm.name,description:this.productForm.description,status:this.productForm.status,farmId:this.farmId,price:this.productForm.price,province:{id:this.productForm.province.id},imageUrls:[].concat([this.productForm.mainImage],this.productForm.imageUrls)};"add-product"===this.dialogAction?this.addProduct(t):"update-product"===this.dialogAction?(t.id=this.productForm.id,this.updateProduct(t)):console.log("nothing happen",this.dialogAction)},addProduct:function(t){var e=this;console.log("add product",t),Object(st["e"])(t).then((function(t){e.$message.success("Thêm sản phẩm thành công"),console.log("insert successfully",t),e.fetchProducts(),e.closeDialog()})).catch((function(t){e.$message.error("Thêm sản phẩm thất bại, vui lòng thử lại sau"),console.log(t)}))},updateProduct:function(t){var e=this;console.log("update product",t),Object(st["f"])(t).then((function(t){console.log("update successfully",t),e.$message.success("Cập nhật thông tin sản phẩm thành công"),e.fetchProducts(),e.closeDialog()})).catch((function(t){console.log(t),e.$message.error("Cập nhật thông tin sản phẩm thất bại, vui lòng thử lại sau")}))},handleOpenDialogCreateProduct:function(){this.loadProductInfoToForm(null),this.dialogVisible=!0,this.dialogAction="add-product",this.dialogTitle="Thêm sản phẩm mới"},closeDialog:function(){this.dialogAction="",this.dialogTitle="",this.dialogVisible=!1,this.fileList=[]},fetchProvinceSuggestions:function(t,e){Object(q["b"])(t).then((function(t){e(t)}))},handleSelectProvince:function(t){this.productForm.province=t}}},lt=ct,ut=(i("a91e"),Object(v["a"])(lt,it,rt,!1,null,"5a6d3a90",null)),dt=ut.exports,mt={name:"Index",components:{PieChart:y,FarmDescription:I,DragKanban:M,Activity:B["a"],FarmProduct:dt,Orders:et},data:function(){return{farms:[],currentFarm:{name:"",province:{},district:{},ward:{},detailAddress:"",descriptions:{},trees:[]},farmStatistic:{},activeFarm:"0",loadingFarm:!1,pieChartKey:0,activityHistoryListKey:0,dragActivityKey:0,farmStructureKey:0,farmInfoForm:{},formsHaveData:!1,farmInfoFormRules:{"name.content":[{required:!0,message:"Tên vườn không được trống !"}],province:[{required:!0,validator:this.checkProvince,trigger:"change"}],district:[{required:!0,validator:this.checkDistrict,trigger:"change"}],ward:[{required:!0,validator:this.checkWard,trigger:"change"}]},farmStructureForm:{},inputTreeVisible:!1,inputTree:"",dialogVisible:!1,buttonResetLoading:!1,buttonSaveLoading:!1,loadingInfoFarm:!1,loadingStatistic:!1,dialogCreateProductVisible:!1,activeTab:"structure-tab",hasNewOrder:!0}},computed:{hasFarm:function(){return this.farms.length>0},farmInfoFormHasChanged:function(){if(this.currentFarm.name!==this.farmInfoForm.name.content)return console.log("name is not equal: "+this.currentFarm.name+", "+this.farmInfoForm.name.content),!0;if(this.currentFarm.detailAddress!==this.farmInfoForm.detailAddress.content)return console.log("detail address is not equal: "+this.currentFarm.detailAddress+", "+this.farmInfoForm.detailAddress.content),!0;if(this.currentFarm.province.id!==this.farmInfoForm.province.id)return console.log("province is not equal: "+this.currentFarm.province.id+", "+this.farmInfoForm.province.id),!0;if(this.currentFarm.district.id!==this.farmInfoForm.district.id)return console.log("district is not equal: "+this.currentFarm.district.id+", "+this.farmInfoForm.district.id),!0;if(this.currentFarm.ward.id!==this.farmInfoForm.ward.id)return console.log("ward is not equal: "+this.currentFarm.ward.id+", "+this.farmInfoForm.ward.id),!0;for(var t=[],e=0,i=Object.keys(this.currentFarm.descriptions);e<i.length;e++){var r=i[e];t.push({label:r,content:this.currentFarm.descriptions[r]})}if(t.length!==this.farmInfoForm.descriptions.length)return console.log("length is not equal: "+t.length+", "+this.farmInfoForm.descriptions.length),!0;for(var a=0;a<t.length;a++)if(t[a].content!==this.farmInfoForm.descriptions[a].content)return console.log("description is not equal: "+t[a].content+", "+this.farmInfoForm.descriptions[a].content),!0;return!1},farmStructureHasChanged:function(){if(this.farmStatistic.types.length!==this.farmStructureForm.types.length)return!0;if(this.farmStatistic.numbers.length!==this.farmStructureForm.numbers.length)return!0;for(var t=0;t<this.farmStatistic.types.length;t++){if(this.farmStatistic.types[t]!==this.farmStructureForm.types[t])return!0;if(this.farmStatistic.numbers[t].name!==this.farmStructureForm.numbers[t].name)return!0;if(this.farmStatistic.numbers[t].value!==this.farmStructureForm.numbers[t].value)return!0}return!1}},watch:{activeFarm:{handler:function(t){this.loadFarmInfo(t)},immediate:!1}},created:function(){this.fetchFarms()},methods:{fetchFarms:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(U["b"])();case 2:t.farms=e.sent,console.log("fetch farms successfully, ",t.farms),t.farms.length>0&&(t.farms.length<=1*t.activeFarm&&(t.activeFarm="0"),t.loadFarmInfo(1*t.activeFarm)),t.farmInfoForm=t.cloneFarmInfo(),t.farmStructureForm=t.cloneFarmStructure(),t.$nextTick(function(){this.formsHaveData=!0}.bind(t));case 8:case"end":return e.stop()}}),e)})))()},loadFarmInfo:function(t){this.currentFarm=this.farms[t];var e=this.currentFarm.trees.reduce((function(t,e){var i=e.treeName;return t.types.push(i),t.numbers.push({name:i,value:e.quantity,treeId:e.treeId}),t}),{types:[],numbers:[]}),i=!1;if(null==this.farmStatistic.numbers)i=!0;else if(this.farmStatistic.numbers.length!==e.numbers.length)i=!0;else for(var r=0;r<this.farmStatistic.numbers.length;r++){var a=this.farmStatistic.numbers[r],n=e.numbers[r];if(a.value!==n.value){i=!0;break}}this.farmStatistic=e,i&&this.forceRenderPieChart(),this.forceRenderActivityHistory(),this.forceRenderDragActivity()},forceRenderPieChart:function(){this.pieChartKey+=1},forceRenderActivityHistory:function(){this.activityHistoryListKey+=1},forceRenderDragActivity:function(){this.dragActivityKey+=1},handleEdit:function(){this.dialogVisible=!1,this.farmInfoForm=this.cloneFarmInfo(),this.farmStructureForm=this.cloneFarmStructure(),this.dialogVisible=!0},alertDelete:function(){var t=this;this.$confirm("Vườn sẽ bị xóa vĩnh viễn, bạn có chắc không ?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}).then((function(){t.handleDelete()})).catch((function(){console.log("cancel delete !")}))},handleDelete:function(){console.log("xoa vuon",this.currentFarm.id)},cloneFarmInfo:function(){var t={content:this.currentFarm.name,inputVisible:!1},e={content:this.currentFarm.detailAddress,inputVisible:!1},i=[];for(var r in this.currentFarm.descriptions)i.push({label:r,content:this.currentFarm.descriptions[r],inputVisible:!1,inputLabelVisible:!1});var a={name:this.currentFarm.province.name,id:this.currentFarm.province.id,inputVisible:!1},n={name:this.currentFarm.district.name,id:this.currentFarm.district.id,inputVisible:!1},s={name:this.currentFarm.ward.name,id:this.currentFarm.ward.id,inputVisible:!1};return{name:t,detailAddress:e,province:a,district:n,ward:s,descriptions:i}},cloneFarmStructure:function(){if(void 0===this.farmStatistic.types||void 0===this.farmStatistic.numbers)return null;var t=Object(o["a"])(this.farmStatistic.types),e=this.farmStatistic.numbers.map((function(t){return Object(s["a"])({},t)}));return{types:t,numbers:e}},handleResetFarmInfoForm:function(){this.buttonResetLoading=!0,this.loadingInfoFarm=!0,setTimeout(function(){this.farmInfoForm=this.cloneFarmInfo(),this.buttonResetLoading=!1,this.loadingInfoFarm=!1}.bind(this),500)},handleSaveFarmInfoForm:function(){var t=this;this.$refs["farmInfoForm"].validate((function(e){if(!e)return console.log("farm info form is not valid !"),!1;t.buttonSaveLoading=!0;var i=t.farmInfoForm.name.content,r=t.farmInfoForm.detailAddress.content,a=t.farmInfoForm.province,n=t.farmInfoForm.district,s=t.farmInfoForm.ward,o=t.farmInfoForm.descriptions.reduce((function(t,e){return t[e.label]=e.content,t}),{}),c={id:t.currentFarm.id,name:i,detailAddress:r,descriptions:o,province:a,district:n,ward:s};console.log(c),Object(U["e"])(c).then((function(e){console.log("success, result: ",e),t.farms[t.activeFarm]=e,t.loadFarmInfo(t.activeFarm),t.handleResetFarmInfoForm(),t.$message.success("Cập nhật thông tin thành công")})).catch((function(e){console.log(e),t.$message.error("Cập nhật thông tin thất bại")})).finally((function(){setTimeout(function(){this.buttonSaveLoading=!1}.bind(t),300)}))}))},queryTreeSearch:function(t,e){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("query tree search, ",t),r.next=3,Object(U["d"])(t);case 3:a=r.sent,i.lastQuerySearchResult=a,s=a.filter((function(t){var e,r=Object(n["a"])(i.farmStructureForm.types);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a===t.name)return!1}}catch(s){r.e(s)}finally{r.f()}return!0})),e(s.map((function(t){return{value:t.name}})));case 7:case"end":return r.stop()}}),r)})))()},handleResetFarmStructureForm:function(){this.farmStructureForm=this.cloneFarmStructure()},handleSaveFarmStructureForm:function(){var t=this;console.log(this.farmStructureForm.numbers);var e=this.farmStructureForm.numbers.map((function(t){return{treeId:t.treeId,quantity:t.value}})),i={farmId:this.currentFarm.id,trees:e};console.log("save farm structure, ",i),Object(U["f"])(i).then((function(e){console.log("result, ",e.trees),t.farms[t.activeFarm]=e,t.loadFarmInfo(t.activeFarm),t.handleResetFarmStructureForm(),t.$message.success("Cập nhật thông tin thành công")})).catch((function(e){console.log(e),t.$message.error("Cập nhật thông tin thất bại")}))},showInput:function(t,e,i){t.inputVisible=!0,t.inputLabelVisible=!0,this.$nextTick(function(t){t?this.$refs[e][0].$refs.input.focus():this.$refs[e].$refs.input.focus()}.bind(this,i))},handleInsertDescription:function(){console.log("insert more description");var t=this.farmInfoForm.descriptions.length;this.farmInfoForm.descriptions.push({label:"",content:"",inputVisible:!1,inputLabelVisible:!1}),this.showInput(this.farmInfoForm.descriptions[t],"desc"+t,!0)},handleRemoveTree:function(t){this.farmStructureForm.types.splice(this.farmStructureForm.types.indexOf(t),1);for(var e=0;e<this.farmStructureForm.numbers.length;e++)if(this.farmStructureForm.numbers[e].name===t){this.farmStructureForm.numbers.splice(e,1);break}},handleInputTreeConfirm:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i,r,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("handle input confirm"),!t.inputTree){e.next=12;break}r=Object(n["a"])(t.lastQuerySearchResult);try{for(r.s();!(a=r.n()).done;)s=a.value,s.name===t.inputTree&&(i=s.id)}catch(c){r.e(c)}finally{r.f()}if(null!=i){e.next=10;break}return e.next=7,Object(U["c"])({name:t.inputTree});case 7:o=e.sent,console.log("new tree: ",t.inputTree,", data: ",o),i=o.id;case 10:t.farmStructureForm.types.push(t.inputTree),t.farmStructureForm.numbers.push({name:t.inputTree,treeId:i,value:0});case 12:t.inputTree="",t.inputTreeVisible=!1;case 14:case"end":return e.stop()}}),e)})))()},showInputTree:function(){var t=this;this.inputTreeVisible=!0,this.$nextTick((function(e){t.$refs.saveTreeTagInput.$refs.input.focus()}))},checkRemoveDescription:function(t,e){""===t.label.trim()?""===t.content.trim()&&this.farmInfoForm.descriptions.splice(e,1):t.inputLabelVisible=!1},fetchProvinceSuggestions:function(t,e){Object(q["b"])(t).then((function(t){e(t)}))},fetchDistrictSuggestions:function(t,e){var i=this.farmInfoForm.province.id;void 0!==i&&Object(q["a"])(i,t).then((function(t){e(t)}))},fetchWardSuggestions:function(t,e){var i=this.farmInfoForm.district.id;void 0!==i&&Object(q["c"])(i,t).then((function(t){e(t)}))},handleSelectProvince:function(t){this.farmInfoForm.province=Object(s["a"])(Object(s["a"])({},t),{},{inputVisible:!1}),console.log("select province, ",t),this.farmInfoForm.district={name:"",inputVisible:!1},this.farmInfoForm.ward={name:"",inputVisible:!1}},handleSelectDistrict:function(t){this.farmInfoForm.district=Object(s["a"])(Object(s["a"])({},t),{},{inputVisible:!1}),console.log("select district, ",t),this.farmInfoForm.ward={name:"",inputVisible:!1}},handleSelectWard:function(t){this.farmInfoForm.ward=Object(s["a"])(Object(s["a"])({},t),{},{inputVisible:!1}),console.log("select ward, ",t)},focusDistrict:function(){void 0===this.farmInfoForm.province.id&&(this.$message.warning("Vui lòng chọn Tỉnh trước"),this.$refs["farmDistrict"].$refs.input.blur())},focusWard:function(){void 0===this.farmInfoForm.province.id?(this.$message.warning("Vui lòng chọn Tỉnh"),this.$refs["farmWard"].$refs.input.blur()):void 0===this.farmInfoForm.district.id&&(this.$message.warning("Vui lòng chọn Huyện"),this.$refs["farmWard"].$refs.input.blur())},checkProvince:function(t,e,i){void 0===e.id?i(new Error("Tỉnh là thông tin bắt buộc")):i()},checkDistrict:function(t,e,i){void 0===e.id?i(new Error("Huyện là thông tin bắt buộc")):i()},checkWard:function(t,e,i){void 0===e.id?i(new Error("Xã là thông tin bắt buộc")):i()},handleReRenderEvent:function(){this.forceRenderActivityHistory()}}},ht=mt,ft=(i("a869"),Object(v["a"])(ht,r,a,!1,null,"5b23c24b",null));e["default"]=ft.exports},"0f71":function(t,e,i){"use strict";i("a826")},"172d":function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"f",(function(){return n})),i.d(e,"b",(function(){return s})),i.d(e,"e",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){return l}));var r=i("b775");i("27aa");function a(t){return Object(r["a"])({url:"/farm-care-history",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/farm-care-history",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/farm-care-history/all",method:"get",params:{farmId:t}})}function o(t,e){return Object(r["a"])({url:"/farm-care-history/search-by-date",method:"get",params:{farmId:t,date:e}})}function c(t){return Object(r["a"])({url:"/farm-care-history",method:"get",params:{id:t}})}function l(t){return Object(r["a"])({url:"/farm-care-history",method:"delete",params:{id:t}})}},"2f94":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return s}));var r=i("b775");function a(t){return void 0!==t&&null!=t||(t=""),Object(r["a"])({url:"/address/province",method:"get",params:{name:t}})}function n(t,e){return console.log("provinceId, ",t,"name, ",e),Object(r["a"])({url:"/address/district",method:"get",params:{provinceId:t,name:e}})}function s(t,e){return Object(r["a"])({url:"/address/ward",method:"get",params:{districtId:t,name:e}})}},"32ae":function(t,e,i){},3605:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-button",{staticClass:"container",on:{click:function(e){return t.handleClick(t.product)}}},[i("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[i("div",{staticClass:"image-container"},[i("img",{staticClass:"image",attrs:{src:t.product.mainImage,alt:"image"}})]),i("div",{staticClass:"product-info"},[i("span",{staticClass:"center-text title change-size"},[t._v(t._s(t.product.name))]),i("span",{staticClass:"center-text price"},[t._v(t._s(t.convertPriceToVND(t.product.price)))]),i("span",{staticClass:"center-text location"},[i("i",{staticClass:"icon el-icon-location-outline"}),t._v(t._s(t.product.province))])])])],1)},a=[],n=i("2861"),s={name:"ProductItem",props:{product:{type:Object,default:function(){return{id:null,mainImage:"",name:"",price:"",province:{name:""}}}}},data:function(){return{convertPriceToVND:n["a"]}},methods:{handleClick:function(t){this.$emit("showProductDetail",t.id)}}},o=s,c=(i("e508"),i("2877")),l=Object(c["a"])(o,r,a,!1,null,"25d6c96c",null);e["a"]=l.exports},5653:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"box-sizing":"content-box",clear:"both","margin-bottom":"5px",height:"100px","padding-bottom":"20px"}},[i("div",{staticStyle:{width:"100px",height:"100%",float:"left","border-radius":"4px",border:"1px solid #bbbbbb"}},[i("el-avatar",{staticStyle:{width:"100%",height:"100%"},attrs:{shape:"square",fit:"cover",src:t.orderDetail.mainImage}})],1),i("div",{staticStyle:{width:"700px",height:"100px","margin-left":"120px"}},[i("div",{},[i("h4",{staticStyle:{"font-weight":"500"}},[t._v(t._s(t.orderDetail.name))]),i("span",{staticStyle:{display:"block","padding-bottom":"3px","font-size":"small"}},[t._v("Số lượng: "+t._s(t.orderDetail.quantity))]),i("span",{staticStyle:{"font-size":"small"}},[t._v("Giá: "),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.convertPriceToVND(t.orderDetail.price)))])])])])])},a=[],n=i("2861"),s={name:"OrderDetail",props:["orderDetail"],data:function(){return{convertPriceToVND:n["a"]}}},o=s,c=i("2877"),l=Object(c["a"])(o,r,a,!1,null,"5f33c448",null);e["a"]=l.exports},"58b2":function(t,e,i){"use strict";i("f532")},6966:function(t,e,i){"use strict";i("f60e")},"716e":function(t,e,i){"use strict";i("8e6f")},"896b":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[i("div",{staticClass:"vicp-wrap"},[i("div",{staticClass:"vicp-close",on:{click:t.off}},[i("i",{staticClass:"vicp-icon4"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step == 1"}],staticClass:"vicp-step1"},[i("div",{staticClass:"vicp-drop-area",on:{dragleave:t.preventDefault,dragover:t.preventDefault,dragenter:t.preventDefault,click:t.handleClick,drop:t.handleChange}},[i("i",{directives:[{name:"show",rawName:"v-show",value:1!=t.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[i("i",{staticClass:"vicp-icon1-arrow"}),i("i",{staticClass:"vicp-icon1-body"}),i("i",{staticClass:"vicp-icon1-bottom"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:1!==t.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[t._v(t._s(t.lang.hint))]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[t._v(t._s(t.lang.noSupported))]),1==t.step?i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:t.handleChange}}):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasError,expression:"hasError"}],staticClass:"vicp-error"},[i("i",{staticClass:"vicp-icon2"}),t._v(" "+t._s(t.errorMsg)+" ")]),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:t.off,mousedown:t.ripple}},[t._v(t._s(t.lang.btn.off))])])]),2==t.step?i("div",{staticClass:"vicp-step2"},[i("div",{staticClass:"vicp-crop"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[i("div",{staticClass:"vicp-img-container"},[i("img",{ref:"img",staticClass:"vicp-img",style:t.sourceImgStyle,attrs:{src:t.sourceImgUrl,draggable:"false"},on:{drag:t.preventDefault,dragstart:t.preventDefault,dragend:t.preventDefault,dragleave:t.preventDefault,dragover:t.preventDefault,dragenter:t.preventDefault,drop:t.preventDefault,touchstart:t.imgStartMove,touchmove:t.imgMove,touchend:t.createImg,touchcancel:t.createImg,mousedown:t.imgStartMove,mousemove:t.imgMove,mouseup:t.createImg,mouseout:t.createImg}}),i("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:t.sourceImgShadeStyle}),i("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:t.sourceImgShadeStyle})]),i("div",{staticClass:"vicp-range"},[i("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:t.scale.range},on:{input:t.zoomChange}}),i("i",{staticClass:"vicp-icon5",on:{mousedown:t.startZoomSub,mouseout:t.endZoomSub,mouseup:t.endZoomSub}}),i("i",{staticClass:"vicp-icon6",on:{mousedown:t.startZoomAdd,mouseout:t.endZoomAdd,mouseup:t.endZoomAdd}})]),t.noRotate?t._e():i("div",{staticClass:"vicp-rotate"},[i("i",{on:{mousedown:t.startRotateLeft,mouseout:t.endRotate,mouseup:t.endRotate}},[t._v("↺")]),i("i",{on:{mousedown:t.startRotateRight,mouseout:t.endRotate,mouseup:t.endRotate}},[t._v("↻")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[i("div",{staticClass:"vicp-preview"},[t.noSquare?t._e():i("div",{staticClass:"vicp-preview-item"},[i("img",{style:t.previewStyle,attrs:{src:t.createImgUrl}}),i("span",[t._v(t._s(t.lang.preview))])]),t.noCircle?t._e():i("div",{staticClass:"vicp-preview-item vicp-preview-item-circle"},[i("img",{style:t.previewStyle,attrs:{src:t.createImgUrl}}),i("span",[t._v(t._s(t.lang.preview))])])])])]),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:function(e){return t.setStep(1)},mousedown:t.ripple}},[t._v(t._s(t.lang.btn.back))]),i("a",{staticClass:"vicp-operate-btn",on:{click:t.prepareUpload,mousedown:t.ripple}},[t._v(t._s(t.lang.btn.save))])])]):t._e(),3==t.step?i("div",{staticClass:"vicp-step3"},[i("div",{staticClass:"vicp-upload"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===t.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[t._v(t._s(t.lang.loading))]),i("div",{staticClass:"vicp-progress-wrap"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===t.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:t.progressStyle})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasError,expression:"hasError"}],staticClass:"vicp-error"},[i("i",{staticClass:"vicp-icon2"}),t._v(" "+t._s(t.errorMsg)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[i("i",{staticClass:"vicp-icon3"}),t._v(" "+t._s(t.lang.success)+" ")])]),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:function(e){return t.setStep(2)},mousedown:t.ripple}},[t._v(t._s(t.lang.btn.back))]),i("a",{on:{click:t.off,mousedown:t.ripple}},[t._v(t._s(t.lang.btn.close))])])]):t._e(),i("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:t.width,height:t.height}})])])},a=[],n=i("53ca"),s=(i("a9e3"),i("d3b7"),i("159b"),i("b64b"),i("b775")),o={zh:{hint:"点击，或拖动图片至此处",loading:"正在上传……",noSupported:"浏览器不支持该功能，请使用IE10以上或其他现在浏览器！",success:"上传成功",fail:"图片上传失败",preview:"头像预览",btn:{off:"取消",close:"关闭",back:"上一步",save:"保存"},error:{onlyImg:"仅限图片格式",outOfSize:"单文件大小不能超过 ",lowestPx:"图片最低像素为（宽*高）："}},"zh-tw":{hint:"點擊，或拖動圖片至此處",loading:"正在上傳……",noSupported:"瀏覽器不支持該功能，請使用IE10以上或其他現代瀏覽器！",success:"上傳成功",fail:"圖片上傳失敗",preview:"頭像預覽",btn:{off:"取消",close:"關閉",back:"上一步",save:"保存"},error:{onlyImg:"僅限圖片格式",outOfSize:"單文件大小不能超過 ",lowestPx:"圖片最低像素為（寬*高）："}},en:{hint:"Click or drag the file here to upload",loading:"Uploading…",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload success",fail:"Upload failed",preview:"Preview",btn:{off:"Cancel",close:"Close",back:"Back",save:"Save"},error:{onlyImg:"Image only",outOfSize:"Image exceeds size limit: ",lowestPx:"Image's size is too low. Expected at least: "}},vn:{hint:"Ấn hoặc thả tệp ảnh",loading:"Đang tải lên…",noSupported:"Trình duyệt không hỗ trợ, Vui lòng sử dụng IE10+ hoặc các trình duyệt khác",success:"Tải lên thành công",fail:"Tải lên thất bại",preview:"Xem trước",btn:{off:"Hủy bỏ",close:"Đóng",back:"Quay lại",save:"Lưu"},error:{onlyImg:"Chỉ ảnh",outOfSize:"Dung lượng ảnh vượt quá: ",lowestPx:"Dung lượng ảnh quá nhỏ, ít nhất: "}},ro:{hint:"Atinge sau trage fișierul aici",loading:"Se încarcă",noSupported:"Browser-ul tău nu suportă acest feature. Te rugăm încearcă cu alt browser.",success:"S-a încărcat cu succes",fail:"A apărut o problemă la încărcare",preview:"Previzualizează",btn:{off:"Anulează",close:"Închide",back:"Înapoi",save:"Salvează"},error:{onlyImg:"Doar imagini",outOfSize:"Imaginea depășește limita de: ",loewstPx:"Imaginea este prea mică; Minim: "}},ru:{hint:"Нажмите, или перетащите файл в это окно",loading:"Загружаю……",noSupported:"Ваш браузер не поддерживается, пожалуйста, используйте IE10 + или другие браузеры",success:"Загрузка выполнена успешно",fail:"Ошибка загрузки",preview:"Предпросмотр",btn:{off:"Отменить",close:"Закрыть",back:"Назад",save:"Сохранить"},error:{onlyImg:"Только изображения",outOfSize:"Изображение превышает предельный размер: ",lowestPx:"Минимальный размер изображения: "}},"pt-br":{hint:"Clique ou arraste o arquivo aqui para carregar",loading:"Carregando…",noSupported:"Browser não suportado, use o IE10+ ou outro browser",success:"Sucesso ao carregar imagem",fail:"Falha ao carregar imagem",preview:"Pré-visualizar",btn:{off:"Cancelar",close:"Fechar",back:"Voltar",save:"Salvar"},error:{onlyImg:"Apenas imagens",outOfSize:"A imagem excede o limite de tamanho: ",lowestPx:"O tamanho da imagem é muito pequeno. Tamanho mínimo: "}},fr:{hint:"Cliquez ou glissez le fichier ici.",loading:"Téléchargement…",noSupported:"Votre navigateur n'est pas supporté. Utilisez IE10 + ou un autre navigateur s'il vous plaît.",success:"Téléchargement réussit",fail:"Téléchargement echoué",preview:"Aperçu",btn:{off:"Annuler",close:"Fermer",back:"Retour",save:"Enregistrer"},error:{onlyImg:"Image uniquement",outOfSize:"L'image sélectionnée dépasse la taille maximum: ",lowestPx:"L'image sélectionnée est trop petite. Dimensions attendues: "}},nl:{hint:"Klik hier of sleep een afbeelding in dit vlak",loading:"Uploaden…",noSupported:"Je browser wordt helaas niet ondersteund. Gebruik IE10+ of een andere browser.",success:"Upload succesvol",fail:"Upload mislukt",preview:"Voorbeeld",btn:{off:"Annuleren",close:"Sluiten",back:"Terug",save:"Opslaan"},error:{onlyImg:"Alleen afbeeldingen",outOfSize:"De afbeelding is groter dan: ",lowestPx:"De afbeelding is te klein! Minimale afmetingen: "}},tr:{hint:"Tıkla veya yüklemek istediğini buraya sürükle",loading:"Yükleniyor…",noSupported:"Tarayıcı desteklenmiyor, lütfen IE10+ veya farklı tarayıcı kullanın",success:"Yükleme başarılı",fail:"Yüklemede hata oluştu",preview:"Önizle",btn:{off:"İptal",close:"Kapat",back:"Geri",save:"Kaydet"},error:{onlyImg:"Sadece resim",outOfSize:"Resim yükleme limitini aşıyor: ",lowestPx:"Resmin boyutu çok küçük. En az olması gereken: "}},"es-MX":{hint:"Selecciona o arrastra una imagen",loading:"Subiendo...",noSupported:"Tu navegador no es soportado, porfavor usa IE10+ u otros navegadores mas recientes",success:"Subido exitosamente",fail:"Sucedió un error",preview:"Vista previa",btn:{off:"Cancelar",close:"Cerrar",back:"Atras",save:"Guardar"},error:{onlyImg:"Unicamente imagenes",outOfSize:"La imagen excede el tamaño maximo:",lowestPx:"La imagen es demasiado pequeño. Se espera por lo menos:"}},de:{hint:"Klick hier oder zieh eine Datei hier rein zum Hochladen",loading:"Hochladen…",noSupported:"Browser wird nicht unterstützt, bitte verwende IE10+ oder andere Browser",success:"Upload erfolgreich",fail:"Upload fehlgeschlagen",preview:"Vorschau",btn:{off:"Abbrechen",close:"Schließen",back:"Zurück",save:"Speichern"},error:{onlyImg:"Nur Bilder",outOfSize:"Das Bild ist zu groß: ",lowestPx:"Das Bild ist zu klein. Mindestens: "}},ja:{hint:"クリック・ドラッグしてファイルをアップロード",loading:"アップロード中...",noSupported:"このブラウザは対応されていません。IE10+かその他の主要ブラウザをお使いください。",success:"アップロード成功",fail:"アップロード失敗",preview:"プレビュー",btn:{off:"キャンセル",close:"閉じる",back:"戻る",save:"保存"},error:{onlyImg:"画像のみ",outOfSize:"画像サイズが上限を超えています。上限: ",lowestPx:"画像が小さすぎます。最小サイズ: "}}},c={jpg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",psd:"image/photoshop"},l=(i("ac1f"),i("1276"),i("ace4"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function(t,e){t=t.split(",")[1],t=window.atob(t);for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:e})}),u=function(t,e){var i=Object.assign({ele:t.target,type:"hit",bgc:"rgba(0, 0, 0, 0.15)"},e),r=i.ele;if(r){var a=r.getBoundingClientRect(),n=r.querySelector(".e-ripple");switch(n?n.className="e-ripple":(n=document.createElement("span"),n.className="e-ripple",n.style.height=n.style.width=Math.max(a.width,a.height)+"px",r.appendChild(n)),i.type){case"center":n.style.top=a.height/2-n.offsetHeight/2+"px",n.style.left=a.width/2-n.offsetWidth/2+"px";break;default:n.style.top=t.pageY-a.top-n.offsetHeight/2-document.body.scrollTop+"px",n.style.left=t.pageX-a.left-n.offsetWidth/2-document.body.scrollLeft+"px"}return n.style.backgroundColor=i.bgc,n.className="e-ripple z-active",!1}},d={props:{field:{type:String,default:"avatar"},ki:{type:Number,default:0},value:{type:Boolean,default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noRotate:{type:Boolean,default:!0},noCircle:{type:Boolean,default:!1},noSquare:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"vn"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"},withCredentials:{type:Boolean,default:!1}},data:function(){var t=this.imgFormat,e=this.langType,i=this.langExt,r=this.width,a=this.height,n=!0,s=["jpg","png"],l=-1===s.indexOf(t)?"jpg":t,u=o[e]?o[e]:o["en"],d=c[l];return this.imgFormat=l,i&&Object.assign(u,i),"function"!==typeof FormData&&(n=!1),{mime:d,lang:u,isSupported:n,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:r/a,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:184},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,rotateLeft:!1,rotateRight:!1,degree:0,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){var t=this.progress;return{width:t+"%"}},sourceImgStyle:function(){var t=this.scale,e=this.sourceImgMasking,i=t.y+e.y+"px",r=t.x+e.x+"px";return{top:i,left:r,width:t.width+"px",height:t.height+"px",transform:"rotate("+t.degree+"deg)","-ms-transform":"rotate("+t.degree+"deg)","-moz-transform":"rotate("+t.degree+"deg)","-webkit-transform":"rotate("+t.degree+"deg)","-o-transform":"rotate("+t.degree+"deg)"}},sourceImgMasking:function(){var t=this.width,e=this.height,i=this.ratio,r=this.sourceImgContainer,a=r,n=a.width/a.height,s=0,o=0,c=a.width,l=a.height,u=1;return i<n&&(u=a.height/e,c=a.height*i,s=(a.width-c)/2),i>n&&(u=a.width/t,l=a.width/i,o=(a.height-l)/2),{scale:u,x:s,y:o,width:c,height:l}},sourceImgShadeStyle:function(){var t=this.sourceImgMasking,e=this.sourceImgContainer,i=e,r=t,a=r.width===i.width?r.width:(i.width-r.width)/2,n=r.height===i.height?r.height:(i.height-r.height)/2;return{width:a+"px",height:n+"px"}},previewStyle:function(){var t=this.ratio,e=this.previewContainer,i=e,r=i.width,a=i.height,n=r/a;return t<n&&(r=i.height*t),t>n&&(a=i.width/t),{width:r+"px",height:a+"px"}}},watch:{value:function(t){t&&1!==this.loading&&this.reset()}},created:function(){document.addEventListener("keyup",this.closeHandler)},destroyed:function(){document.removeEventListener("keyup",this.closeHandler)},methods:{ripple:function(t){u(t)},off:function(){var t=this;setTimeout((function(){t.$emit("input",!1),t.$emit("close"),3===t.step&&2===t.loading&&t.setStep(1)}),200)},setStep:function(t){var e=this;setTimeout((function(){e.step=t}),200)},preventDefault:function(t){return t.preventDefault(),!1},handleClick:function(t){1!==this.loading&&t.target!==this.$refs.fileinput&&(t.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(t){if(t.preventDefault(),1!==this.loading){var e=t.target.files||t.dataTransfer.files;this.reset(),this.checkFile(e[0])&&this.setSourceImg(e[0])}},checkFile:function(t){var e=this.lang,i=this.maxSize;return-1===t.type.indexOf("image")?(this.hasError=!0,this.errorMsg=e.error.onlyImg,!1):!(t.size/1024>i)||(this.hasError=!0,this.errorMsg=e.error.outOfSize+i+"kb",!1)},reset:function(){this.loading=0,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(t){var e=this,i=new FileReader;i.onload=function(t){e.sourceImgUrl=i.result,e.startCrop()},i.readAsDataURL(t)},startCrop:function(){var t=this,e=this.width,i=this.height,r=this.ratio,a=this.scale,n=this.sourceImgUrl,s=this.sourceImgMasking,o=this.lang,c=s,l=new Image;l.src=n,l.onload=function(){var n=l.naturalWidth,s=l.naturalHeight,u=n/s,d=c.width,m=c.height,h=0,f=0;if(n<e||s<i)return t.hasError=!0,t.errorMsg=o.error.lowestPx+e+"*"+i,!1;r>u&&(m=d/u,f=(c.height-m)/2),r<u&&(d=m*u,h=(c.width-d)/2),a.range=0,a.x=h,a.y=f,a.width=d,a.height=m,a.degree=0,a.minWidth=d,a.minHeight=m,a.maxWidth=n*c.scale,a.maxHeight=s*c.scale,a.naturalWidth=n,a.naturalHeight=s,t.sourceImg=l,t.createImg(),t.setStep(2)}},imgStartMove:function(t){if(t.preventDefault(),this.isSupportTouch&&!t.targetTouches)return!1;var e=t.targetTouches?t.targetTouches[0]:t,i=this.sourceImgMouseDown,r=this.scale,a=i;a.mX=e.screenX,a.mY=e.screenY,a.x=r.x,a.y=r.y,a.on=!0},imgMove:function(t){if(t.preventDefault(),this.isSupportTouch&&!t.targetTouches)return!1;var e=t.targetTouches?t.targetTouches[0]:t,i=this.sourceImgMouseDown,r=i.on,a=i.mX,n=i.mY,s=i.x,o=i.y,c=this.scale,l=this.sourceImgMasking,u=l,d=e.screenX,m=e.screenY,h=d-a,f=m-n,p=s+h,g=o+f;r&&(p>0&&(p=0),g>0&&(g=0),p<u.width-c.width&&(p=u.width-c.width),g<u.height-c.height&&(g=u.height-c.height),c.x=p,c.y=g)},startRotateRight:function(t){var e=this,i=this.scale;i.rotateRight=!0;var r=function t(){if(i.rotateRight){var r=++i.degree;e.createImg(r),setTimeout((function(){t()}),60)}};r()},startRotateLeft:function(t){var e=this,i=this.scale;i.rotateLeft=!0;var r=function t(){if(i.rotateLeft){var r=--i.degree;e.createImg(r),setTimeout((function(){t()}),60)}};r()},endRotate:function(){var t=this.scale;t.rotateLeft=!1,t.rotateRight=!1},startZoomAdd:function(t){var e=this,i=this.scale;i.zoomAddOn=!0;var r=function t(){if(i.zoomAddOn){var r=i.range>=100?100:++i.range;e.zoomImg(r),setTimeout((function(){t()}),60)}};r()},endZoomAdd:function(t){this.scale.zoomAddOn=!1},startZoomSub:function(t){var e=this,i=this.scale;i.zoomSubOn=!0;var r=function t(){if(i.zoomSubOn){var r=i.range<=0?0:--i.range;e.zoomImg(r),setTimeout((function(){t()}),60)}};r()},endZoomSub:function(t){var e=this.scale;e.zoomSubOn=!1},zoomChange:function(t){this.zoomImg(t.target.value)},zoomImg:function(t){var e=this,i=this.sourceImgMasking,r=this.scale,a=r.maxWidth,n=r.maxHeight,s=r.minWidth,o=r.minHeight,c=r.width,l=r.height,u=r.x,d=r.y,m=i,h=m.width,f=m.height,p=s+(a-s)*t/100,g=o+(n-o)*t/100,v=h/2-p/c*(h/2-u),b=f/2-g/l*(f/2-d);v>0&&(v=0),b>0&&(b=0),v<h-p&&(v=h-p),b<f-g&&(b=f-g),r.x=v,r.y=b,r.width=p,r.height=g,r.range=t,setTimeout((function(){r.range===t&&e.createImg()}),300)},createImg:function(t){var e=this.mime,i=this.sourceImg,r=this.scale,a=r.x,n=r.y,s=r.width,o=r.height,c=r.degree,l=this.sourceImgMasking.scale,u=this.$refs.canvas,d=u.getContext("2d");t&&(this.sourceImgMouseDown.on=!1),u.width=this.width,u.height=this.height,d.clearRect(0,0,this.width,this.height),d.fillStyle="#fff",d.fillRect(0,0,this.width,this.height),d.translate(.5*this.width,.5*this.height),d.rotate(Math.PI*c/180),d.translate(.5*-this.width,.5*-this.height),d.drawImage(i,a/l,n/l,s/l,o/l),this.createImgUrl=u.toDataURL(e)},prepareUpload:function(){var t=this.url,e=this.createImgUrl,i=this.field,r=this.ki;this.$emit("crop-success",e,i,r),"string"===typeof t&&t?this.upload():this.off()},upload:function(){var t=this,e=this.lang,i=this.imgFormat,r=this.mime,a=this.url,o=this.params,c=this.field,u=this.ki,d=this.createImgUrl,m=new FormData;m.append(c,l(d,r),c+"."+i),"object"===Object(n["a"])(o)&&o&&Object.keys(o).forEach((function(t){m.append(t,o[t])})),this.reset(),this.loading=1,this.setStep(3),Object(s["a"])({url:a,method:"post",data:m}).then((function(e){t.loading=2,t.$emit("crop-upload-success",e)})).catch((function(i){t.value&&(t.loading=3,t.hasError=!0,t.errorMsg=e.fail,t.$emit("crop-upload-fail",i,c,u))}))},closeHandler:function(t){!this.value||"Escape"!==t.key&&27!==t.keyCode||this.off()}}},m=d,h=(i("de53"),i("2877")),f=Object(h["a"])(m,r,a,!1,null,null,null);e["a"]=f.exports},"899d":function(t,e,i){},"8e6f":function(t,e,i){},"8f13":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{directives:[{name:"show",rawName:"v-show",value:null!=t.farm.id,expression:"farm.id != null"}],staticClass:"box-card"},[i("h3",{staticStyle:{float:"left","padding-bottom":"10px"}},[i("i",{staticClass:"icon-before el-icon-news"}),t._v("Lịch sử")]),i("el-timeline",{staticStyle:{clear:"both"}},t._l(t.farmCareHistoryList,(function(e,r){return i("el-timeline-item",{key:r,attrs:{timestamp:e.farmCareHistoryDTO.careDate,placement:"top"}},[i("el-card",[i("h3",{staticStyle:{display:"inline-block"}},[t._v(t._s(e.farmCareHistoryDTO.activity.name))]),i("span",{staticStyle:{display:"inline-block",float:"right","border-bottom":"1px solid #4A9FF9"}},[t._v(" "+t._s(e.farmCareHistoryDTO.careTime)+" ")]),i("el-collapse",t._l(e.farmCareHistoryDTO.treeCares,(function(e){return i("el-collapse-item",{key:e.id,attrs:{title:e.tree.name}},[null!=e.status&&e.status.length>0?i("span",[i("i",{staticClass:"el-icon-s-claim",staticStyle:{color:"#2ac06d"}}),t._v(" "+t._s(e.status)+" ")]):i("span",[i("i",{staticClass:"el-icon-s-release",staticStyle:{color:"#f9944a"}}),t._v(" Không có thông tin chi tiết")])])})),1),i("div",{staticStyle:{"margin-top":"20px"}},t._l(e.visitors,(function(e){return i("el-popover",{key:e.username,attrs:{placement:"top-start",width:"350",trigger:"hover"}},[i("div",[i("el-avatar",{staticStyle:{display:"inline-block",float:"left"},attrs:{shape:"square",size:100,fit:"cover",src:e.avatar}}),i("div",{staticStyle:{display:"inline-block","margin-left":"20px"}},[i("h4",[t._v(t._s(e.name))])])],1),i("el-avatar",{staticStyle:{"margin-right":"2px"},attrs:{slot:"reference",shape:"circle",size:40,fit:"cover",src:e.avatar},slot:"reference"})],1)})),1)],1)],1)})),1)],1)},a=[],n=i("172d"),s={props:{farm:{type:Object,default:function(){return{}}}},data:function(){return{farmCareHistoryList:[]}},created:function(){this.fetchFarmCareHistory()},methods:{fetchFarmCareHistory:function(){var t=this;void 0!==this.farm.id?Object(n["b"])(this.farm.id).then((function(e){t.farmCareHistoryList=e})).catch((function(e){t.$message.error("Lỗi khi tải lịch sử chăm sóc vườn"),console.log(e)})):console.log("cannot get farm care history, farm id == undifined !")}}},o=s,c=(i("716e"),i("2877")),l=Object(c["a"])(o,r,a,!1,null,"74c05eba",null);e["a"]=l.exports},"92a5":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-button",{staticClass:"address-item",on:{click:t.handleClickAddressItem}},[i("h3",{staticStyle:{"font-weight":"500","margin-top":"0",color:"#4A9FF9"}},[t._v(t._s(t.userAddress.receiver))]),i("span",{staticClass:"address-detail",staticStyle:{"word-break":"break-word"}},[i("span",{staticStyle:{color:"#7c6b6b"}},[t._v(t._s(t.address))])]),i("span",{staticClass:"address-detail"},[t._v("Điện thoại: "),i("span",{staticStyle:{color:"#7C6B6BFF"}},[t._v(t._s(t.userAddress.phoneNumber))])])])},a=[],n=(i("b0c0"),{name:"AddressItem",props:["userAddress"],created:function(){},computed:{address:function(){var t=", ",e="";return this.userAddress.detail.length>0&&(e+=this.userAddress.detail+t),e+=this.userAddress.ward.name+t,e+=this.userAddress.district.name+t,e+=this.userAddress.province.name,e}},methods:{handleClickAddressItem:function(){this.$emit("clickAddressItem",this.userAddress)}}}),s=n,o=(i("9ce8"),i("2877")),c=Object(o["a"])(s,r,a,!1,null,"3109f219",null);e["a"]=c.exports},"946e":function(t,e,i){},"9ce8":function(t,e,i){"use strict";i("caac")},a826:function(t,e,i){},a869:function(t,e,i){"use strict";i("bbbe")},a91e:function(t,e,i){"use strict";i("32ae")},bbbe:function(t,e,i){},c4c8:function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return n})),i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return l}));var r=i("b775");function a(t){return Object(r["a"])({url:"/product",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/product",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/product",method:"delete",params:{productId:t}})}function o(t){return Object(r["a"])({url:"/product/all",method:"get",params:{farmId:t}})}function c(t,e,i,a){return Object(r["a"])({url:"/product/all-in-page",method:"get",params:{farmId:t,page:e,size:i,sort:a}})}function l(t){return Object(r["a"])({url:"/product",method:"get",params:{productId:t}})}},caac:function(t,e,i){},d415:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"d",(function(){return c})),i.d(e,"c",(function(){return l}));var r=i("b775");i("0b16");function a(){return Object(r["a"])({url:"/farm/all",method:"get"})}function n(t){return Object(r["a"])({url:"/farm",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/farm",method:"put",data:t})}function o(t){return Object(r["a"])({url:"/farm/tree",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/tree/search",method:"get",params:{name:t}})}function l(t){return console.log("insert tree"),Object(r["a"])({url:"/tree",method:"post",data:t})}},de53:function(t,e,i){"use strict";i("946e")},e508:function(t,e,i){"use strict";i("899d")},f532:function(t,e,i){},f60e:function(t,e,i){},f8b7:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"e",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c}));var r=i("b775");function a(t){return Object(r["a"])({url:"/order",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/order",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/order",method:"get",params:{orderNumber:t}})}function o(){return Object(r["a"])({url:"/order/all",method:"get"})}function c(t){return Object(r["a"])({url:"/order/all-in-farm",method:"get",params:{farmId:t}})}}}]);